entities:
  - name: Staff
    type: resource
    rows: 10
    attributes:
      - name: id
        type: pk
      - name: role
        type: resource_type
        generator:
          type: distribution
          formula: DISC(0.5, Tech Support, 0.3, Developer, 0.2, Manager)
      - name: name
        type: string
        generator:
          type: faker
          method: person.fullName
  - name: Ticket
    type: entity
    rows: n/a
    attributes:
      - name: id
        type: pk
      - name: submitter_id
        type: fk
        generator:
          type: foreign_key
          subtype: one_to_many
        ref: Submitter.id
      - name: category
        type: string
        generator:
          type: distribution
          formula: DISC(0.5, Bug, 0.3, Feature, 0.2, Security)
      - name: created_at
        type: datetime
      - name: description
        type: string
        generator:
          type: faker
          method: lorem.sentence
      - name: estimated_hours
        type: decimal(10,2)
        generator:
          type: distribution
          formula: UNIF(10,2)
      - name: priority
        type: integer
        generator:
          type: distribution
          formula: DISC(0.5, 1, 0.3, 2, 0.15, 3, 0.05, 4)
      - name: status
        type: string
      - name: title
        type: string
        generator:
          type: template
          template: ticket_{id}
  - name: Submitter
    rows: 20
    attributes:
      - name: id
        type: pk
      - name: email
        type: string
        generator:
          type: faker
          method: internet.email
      - name: name
        type: string
        generator:
          type: faker
          method: person.fullName
  - name: Comment
    rows: n/a
    attributes:
      - name: id
        type: pk
      - name: ticket_id
        type: entity_id
        generator:
          type: foreign_key
          subtype: one_to_many
        ref: Ticket.id
      - name: comment_text
        type: string
        generator:
          type: faker
          method: lorem.paragraph
      - name: sentiment
        type: string
        generator:
          type: distribution
          formula: DISC(0.5, positive, 0.3, neutral, 0.2, negative)
      - name: submitted_at
        type: datetime
        generator:
          type: formula
          expression: |-
            SELECT datetime(created_at, '+' || ((ABS(RANDOM()) % 2)
              + 4) || ' days') FROM Ticket WHERE id = @ticket_id
  - name: Feedback
    rows: n/a
    attributes:
      - name: id
        type: pk
      - name: ticket_id
        type: entity_id
        ref: Ticket.id
      - name: feedback_text
        type: string
        generator:
          type: faker
          method: lorem.sentences
      - name: rating
        type: integer
        generator:
          type: distribution
          formula: DISC(0.1, 1, 0.2, 2, 0.3, 3, 0.25, 4, 0.15, 5)
  - name: Ticket_Staff
    type: bridge
    rows: n/a
    attributes:
      - name: id
        type: pk
      - name: staff_id
        type: resource_id
        generator:
          type: foreign_key
          subtype: one_to_many
        ref: Staff.id
      - name: ticket_id
        type: entity_id
        generator:
          type: foreign_key
          subtype: one_to_many
        ref: Ticket.id
      - name: end_date
        type: datetime
      - name: start_date
        type: datetime
  - name: Email
    type: entity
    rows: n/a
    attributes:
      - name: id
        type: pk
      - name: created_at
        type: datetime
  - name: EmailStaff
    type: bridge
    rows: n/a
    attributes:
      - name: id
        type: pk
      - name: email_id
        type: entity_id
        generator:
          type: foreign_key
          subtype: one_to_many
        ref: Email.id
      - name: staff_id
        type: resource_id
        generator:
          type: foreign_key
          subtype: one_to_many
        ref: Staff.id
