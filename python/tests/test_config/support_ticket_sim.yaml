simulation:
  base_time_unit: hours
  terminating_conditions: TIME(20)
  start_date: 2024-01-01
  random_seed: 42
  resources:
    - resource_table: Staff
      capacities:
        Tech Support: 1
        Developer: 1
        Manager: 1
  queues: &a1
    - name: FIFOQueue
      type: FIFO
    - name: PriorityQueue
      type: HighAttribute
      attribute: priority
    - name: EstimatedHourQueue
      type: LowAttribute
      attribute: estimated_hours
event_simulation:
  queues: *a1
  event_flows:
    - flow_id: flow_1_create_ticket
      event_flow: Ticket_Processing_Flow
      steps:
        - step_id: create_ticket
          step_type: create
          create_config:
            entity_table: Ticket
            interarrival_time:
              formula: EXPO(0.5)
              time_unit: hours
            max_entities: n/a
          next_steps:
            - initial_triage
        - step_id: initial_triage
          step_type: event
          event_config:
            duration:
              formula: NORM(120, 2)
              time_unit: minutes
            resource_requirements:
              - resource_table: Staff
                value: Tech Support
                count: 1
                queue: FIFOQueue
          next_steps:
            - generate_initial_comments
        - step_id: generate_initial_comments
          step_type: trigger
          trigger_config:
            target_table: Comment
            count: 3
          next_steps:
            - route_by_category
        - step_id: route_by_category
          step_type: decide
          decide_config:
            decision_type: nway-condition
            outcomes:
              - outcome_id: outcome_1
                next_step_id: manager_review
                conditions:
                  - if: Attribute
                    name: category
                    is: ==
                    value: Feature
              - outcome_id: outcome_2
                next_step_id: developer_processing
                conditions:
                  - if: Attribute
                    name: category
                    is: ==
                    value: Bug
              - outcome_id: outcome_3
                next_step_id: security_processing
                conditions:
                  - if: Attribute
                    name: category
                    is: ==
                    value: Security
        - step_id: manager_review
          step_type: event
          event_config:
            duration:
              formula: NORM(20, 5)
              time_unit: minutes
            resource_requirements:
              - resource_table: Staff
                value: Manager
                count: 1
                queue: PriorityQueue
          next_steps:
            - escalate_to_developer
        - step_id: escalate_to_developer
          step_type: event
          event_config:
            duration:
              formula: NORM(1.5, 0.3)
              time_unit: hours
            resource_requirements:
              - resource_table: Staff
                value: Developer
                count: 1
                queue: FIFOQueue
          next_steps:
            - mark_resolved
        - step_id: mark_resolved
          step_type: assign
          assign_config:
            assignments:
              - assignment_type: attribute
                attribute_name: status
                value: resolved
          next_steps:
            - generate_feedback
        - step_id: generate_feedback
          step_type: trigger
          trigger_config:
            target_table: Feedback
            count: DISC(0.7, 1, 0.3, 2)
          next_steps:
            - release_ticket
        - step_id: release_ticket
          step_type: release
        - step_id: developer_processing
          step_type: event
          event_config:
            duration:
              formula: NORM(2, 0.5)
              time_unit: hours
            resource_requirements:
              - resource_table: Staff
                value: Developer
                count: 1
                queue: EstimatedHourQueue
          next_steps:
            - generate_additional_comments
        - step_id: generate_additional_comments
          step_type: trigger
          trigger_config:
            target_table: Comment
            count: UNIF(2, 4)
          next_steps:
            - mark_resolved
        - step_id: security_processing
          step_type: event
          event_config:
            duration:
              formula: NORM(30, 10)
              time_unit: minutes
            resource_requirements:
              - resource_table: Staff
                value: Security
                count: 1
                queue: EstimatedHourQueue
          next_steps:
            - mark_resolved
    - flow_id: flow_2_create_entities_1
      event_flow: EmailProcess
      steps:
        - step_id: create_entities_1
          step_type: create
          create_config:
            entity_table: Email
            interarrival_time:
              formula: NORM(5,2)
              time_unit: hours
            max_entities: n/a
          next_steps:
            - ReadEmail
        - step_id: ReadEmail
          step_type: event
          event_config:
            duration:
              formula: NORM(5, 1)
              time_unit: minutes
            resource_requirements:
              - resource_table: Staff
                value: Tech Support
                count: 1
                queue: FIFOQueue
          next_steps:
            - release_1
        - step_id: release_1
          step_type: release
