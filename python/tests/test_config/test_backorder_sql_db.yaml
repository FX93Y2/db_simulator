entities:
  - name: Book
    rows: 20
    attributes:
      - name: book_key
        type: pk
      - name: title
        type: varchar
        generator:
          type: faker
          method: book.title
      - name: isbn
        type: string
        generator:
          type: faker
          method: commerce.isbn
      - name: price
        type: decimal(10,2)
        generator:
          type: distribution
          formula: UNIF(10, 20)
      - name: stock_level
        type: integer
        generator:
          type: distribution
          formula: UNIF(1, 5)
  - name: Order
    type: entity
    rows: n/a
    attributes:
      - name: order_key
        type: pk
      - name: created_at
        type: datetime
      - name: first_name
        type: varchar
        generator:
          type: faker
          method: person.firstName
      - name: last_name
        type: varchar(255)
        generator:
          type: faker
          method: person.lastName
      - name: status
        type: varchar
        generator:
          type: template
          template: pending
  - name: OrderBooks
    type: bridge
    rows: n/a
    attributes:
      - name: bridge_key
        type: pk
      - name: book_ref
        type: fk
        generator:
          type: foreign_key
          subtype: one_to_many
        ref: Book.book_key
      - name: order_ref
        type: entity_id
        ref: Order.order_key
      - name: required_amount
        type: integer
  - name: OrderEvent
    type: event
    rows: n/a
    attributes:
      - name: event_key
        type: pk
      - name: order_reference
        type: entity_id
        ref: Order.order_key
      - name: activity_type
        type: event_type
  - name: Review
    rows: 16
    attributes:
      - name: id
        type: pk
      - name: order_id
        type: fk
        generator:
          type: foreign_key
          subtype: one_to_many
        ref: Order.order_key
      - name: sentiment
        type: string
        generator:
          type: distribution
          formula: DISC(0.7, "positive", 0.2, "negative", 0.1, "neutral")
