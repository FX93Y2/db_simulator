simulation:
  base_time_unit: hours
  terminating_conditions: TIME(72)
  start_date: 2024-01-01
  random_seed: 42
  resources:
    - resource_table: Doctor
      capacities:
        Attending Physician: 1
        Resident Physician: 1
        Nurse Practitioner: 1
        Pathologist: 1
  queues: &a1
    - name: Initial Consultation Queue
      type: HighAttribute
      attribute: prioirty
event_simulation:
  event_flows:
    - flow_id: flow_1_Patient Arrival
      event_flow: flow_1_patient_arrives
      steps:
        - step_id: Patient Arrival
          step_type: create
          create_config:
            entity_table: Patient
            interarrival_time:
              formula: UNIF(1,3)
              time_unit: hours
            max_entities: n/a
          next_steps:
            - Initial Consultation
        - step_id: Initial Consultation
          step_type: event
          event_config:
            duration:
              formula: UNIF(15,30)
              time_unit: minutes
            resource_requirements:
              - resource_table: Doctor
                value: Resident Physician
                count: 1
                queue: Initial Consultation Queue
              - resource_table: Doctor
                value: Nurse Practitioner
                count: UNIF(0,1)
                queue: Initial Consultation Queue
              - resource_table: Doctor
                value: Attending Physician
                count: UNIF(0,2)
                queue: Initial Consultation Queue
            bridge_table: Appointment
          next_steps:
            - Clinical Decision
          group_id: group_1
        - step_id: Clinical Decision
          step_type: decide
          decide_config:
            decision_type: nway-chance
            outcomes:
              - outcome_id: outcome_1
                next_step_id: Medication Oder
                conditions:
                  - if: Probability
                    is: ==
                    value: 0.5
              - outcome_id: outcome_2
                next_step_id: Tests
                conditions:
                  - if: Probability
                    is: ==
                    value: 0.4
              - outcome_id: outcome_3
                next_step_id: Treatment
                conditions:
                  - if: Probability
                    is: ==
                    value: 0.1
          group_id: group_1
        - step_id: Medication Oder
          step_type: event
          event_config:
            duration:
              formula: UNIF(15,30)
              time_unit: minutes
            resource_requirements:
              - resource_table: Doctor
                value: Attending Physician
                count: 1
            bridge_table: MedicationOrder
          next_steps:
            - Discharge_1
          group_id: group_1
        - step_id: Discharge_1
          step_type: event
          event_config:
            duration:
              formula: UNIF(30, 180)
              time_unit: minutes
            resource_requirements:
              - resource_table: Doctor
                value: Attending Physician
                count: 1
              - resource_table: Doctor
                value: Nurse Practitioner
                count: 1
            bridge_table: MedicationOrder
          next_steps:
            - assign discharge_1
          group_id: group_1
        - step_id: assign discharge_1
          step_type: assign
          assign_config:
            assignments:
              - assignment_type: attribute
                attribute_name: status
                value: discharged
          next_steps:
            - release_1
        - step_id: release_1
          step_type: release
        - step_id: Tests
          step_type: event
          event_config:
            duration:
              formula: UNIF(30, 180)
              time_unit: minutes
            resource_requirements:
              - resource_table: Doctor
                value: Resident Physician
                count: 1
              - resource_table: Doctor
                value: Attending Physician
                count: 1
              - resource_table: Doctor
                value: Pathologist
                count: 1
              - resource_table: Doctor
                value: Nurse Practitioner
                count: 1
            bridge_table: ClinicalEvent
          next_steps:
            - Review
          group_id: group_1
        - step_id: Review
          step_type: event
          event_config:
            duration:
              formula: UNIF(15, 60)
              time_unit: minutes
            resource_requirements:
              - resource_table: Doctor
                value: Attending Physician
                count: 1
              - resource_table: Doctor
                value: Resident Physician
                count: 1
            bridge_table: ClinicalEvent
          next_steps:
            - Final Decision
          group_id: group_1
        - step_id: Final Decision
          step_type: decide
          decide_config:
            decision_type: 2way-chance
            outcomes:
              - outcome_id: outcome_1
                next_step_id: Discharge_2
                conditions:
                  - if: Probability
                    is: ==
                    value: 0.8
              - outcome_id: outcome_2
                next_step_id: Admitting
                conditions:
                  - if: Probability
                    is: ==
                    value: 0.19999999999999996
          group_id: group_1
        - step_id: Discharge_2
          step_type: event
          event_config:
            duration:
              formula: UNIF(30, 180)
              time_unit: minutes
            resource_requirements:
              - resource_table: Doctor
                value: Attending Physician
                count: 1
              - resource_table: Doctor
                value: Nurse Practitioner
                count: 1
            bridge_table: ClinicalEvent
          next_steps:
            - assign discharge_2
          group_id: group_1
        - step_id: assign discharge_2
          step_type: assign
          assign_config:
            assignments:
              - assignment_type: attribute
                attribute_name: status
                value: discharged
          next_steps:
            - release_1
        - step_id: Admitting
          step_type: event
          event_config:
            duration:
              formula: UNIF(45, 120)
              time_unit: minutes
            resource_requirements:
              - resource_table: Doctor
                value: Attending Physician
                count: 1
              - resource_table: Doctor
                value: Nurse Practitioner
                count: 1
              - resource_table: Doctor
                value: Resident Physician
                count: 1
            bridge_table: ClinicalEvent
          next_steps:
            - release_2
          group_id: group_1
        - step_id: release_2
          step_type: release
        - step_id: Treatment
          step_type: event
          event_config:
            duration:
              formula: UNIF(30, 240)
              time_unit: minutes
            resource_requirements:
              - resource_table: Doctor
                value: Resident Physician
                count: 1
              - resource_table: Doctor
                value: Attending Physician
                count: 1
              - resource_table: Doctor
                value: Nurse Practitioner
                count: 1
            bridge_table: ClinicalEvent
          next_steps:
            - Review
          group_id: group_1
  queues: *a1
