// Table Styles (Theming for Bootstrap Table)
.table {
  width: 100%;
  border-collapse: collapse;
  background-color: var(--theme-card-bg);
  color: var(--theme-text);
  margin-bottom: 1rem;

  th, td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid var(--theme-border);
    vertical-align: top;
  }
  
  thead {
    th {
      background-color: var(--theme-table-header-bg);
      color: var(--theme-text);
      font-weight: 600;
      border-bottom-width: 2px;
    }
  }
  
  tbody {
    tr {
      background-color: var(--theme-card-bg);
      color: var(--theme-text);

      &:hover {
        background-color: var(--theme-hover-bg);
      }
    }
  }
  
  &.table-striped {
    tbody tr:nth-of-type(odd) {
      background-color: rgba(0, 0, 0, 0.03);
      body.theme-dark & {
        background-color: rgba(255, 255, 255, 0.03);
      }
    }
  }
}

// Ensure table within responsive container gets themed
.table-responsive .table {
  // Inherit styles from .table above
  background-color: var(--theme-card-bg);
  color: var(--theme-text);
}

.data-table {
  border-collapse: separate;
  border-spacing: 0;

  thead {
    position: sticky;
    top: 0;
    background-color: var(--theme-bg, white); // Ensure header stays above scrolling content
    z-index: 1;

    th {
      border-bottom: 2px solid var(--theme-border);
    }
  }

  tbody tr:hover {
    background-color: var(--theme-hover-bg);
  }

  // Add some padding
  th,
  td {
    padding: 0.6rem 0.75rem;
    border-bottom: 1px solid var(--theme-border); // Use theme border for row lines
  }

  // Remove bottom border from last row
  tbody tr:last-child td {
    border-bottom: none;
  }

  // Align numbers right
  td.number-cell {
    text-align: right;
  }
}

.table-container {
  overflow: auto; // Both horizontal and vertical scrolling
  border: 1px solid var(--theme-border); // Use theme border
  border-radius: 4px;
  max-height: 500px; // Default max height for other contexts
  margin-top: 1rem;

  // Ensure the sticky header works correctly
  thead {
    border-bottom: 1px solid var(--theme-border);
  }
  
  // Style for sortable table headers
  .table th {
    &:hover {
      background-color: var(--theme-hover-bg);
    }
    
    .sort-icons {
      transition: opacity 0.2s ease;
    }
  }
}

// Specific overrides for simulation results table
.simulation-results-table {
  .data-table {
    thead tr {
      // border-bottom: 1px solid var(--theme-secondary, #2ecc71); // REMOVED OLD
      border-bottom: 1px solid var(--theme-border); // ADDED
    }
  }
}

.database-tables-list {
  padding-left: 40px; // Indent tables under results
  
  .database-table-item {
    display: flex;
    align-items: center;
    padding: 6px 10px 6px 0; // Adjust padding
    cursor: pointer;
    font-size: 0.85rem;
    color: var(--theme-muted-text); // Use muted text for non-active
    font-family: inherit; // Ensure regular font is inherited
    border-radius: var(--theme-border-radius);
    
    .table-item-icon {
      margin-right: 8px;
      color: var(--theme-icon-color);
    }
    
    .table-item-name {
      flex-grow: 1;
    }

    &:hover {
      background-color: var(--theme-hover-bg);
      color: var(--theme-text);
    }
    
    // Active state styling
    &.active {
      background-color: var(--theme-active-bg);
      color: var(--theme-active-text);
      font-weight: 500; // Slightly bolder for active
      
      .table-item-icon {
         color: var(--theme-active-text); // Match icon color to text
      }
    }
  }
  
  .no-tables {
    font-size: 0.8rem;
    color: var(--theme-muted-text);
    padding: 6px 10px 6px 0;
  }
}

// Table list container for export modal
.table-list-container {
  border: 1px solid var(--theme-border);
  background-color: var(--theme-bg);
  color: var(--theme-text);
}

// Results table specific styling
.results-table {
  &.data-table {
    margin: 0; // Remove default margin inside container
    
    thead th {
      position: sticky;
      top: 0;
      background-color: var(--theme-card-bg);
      z-index: 10;
      border-bottom: 2px solid var(--theme-border);
      
      &:hover {
        background-color: var(--theme-hover-bg);
      }
    }
    
    tbody {
      tr:hover {
        background-color: var(--theme-hover-bg);
      }
    }
  }
}

// Results Viewer page styling
.results-viewer {
  height: 100vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;

  .results-viewer-content {
    flex: 1;
    padding: 3rem;
    overflow: auto;
    display: flex;
    flex-direction: column;
    min-height: 0; // Important for flex child to shrink
  }

  // Table container wrapper to take up remaining space
  .table-container-wrapper {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0; // Important for flex child to shrink
    margin-top: 0.5rem;

    .table-container {
      flex: 1;
      overflow: auto;
      border: 1px solid var(--theme-border);
      border-radius: 4px;
      min-height: 300px; // Minimum height to ensure usability
      max-height: none; // Remove previous max-height limitation
    }
  }

  // Ensure dashboard card doesn't take up too much space
  .dashboard-card {
    flex-shrink: 0;
  }

  // Compact simulation summary styling
  .simulation-summary-compact {
    flex-shrink: 0;
    
    .card-body {
      padding: 0.75rem 1rem;
    }
    
    .summary-item {
      min-width: 120px;
      
      small {
        display: block;
        font-size: 0.75rem;
        line-height: 1.2;
        margin-bottom: 2px;
      }
      
      .fw-medium {
        font-size: 0.875rem;
        line-height: 1.2;
        font-weight: 500;
      }
    }
  }

  // Make tabs area flex-shrink
  .mb-3 {
    flex-shrink: 0;
  }
}