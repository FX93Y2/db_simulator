// Base React Flow Styles
// Container styles and basic React Flow overrides

@import '../base/variables';
@import 'text-selection-prevention';

// Common styles for diagram containers
.er-diagram-container,
.event-flow-container {
  position: relative;
  width: 100%;
  height: 100%;
  min-height: 400px;
  background-color: var(--theme-editor-bg);
  
  @include prevent-text-selection;
  
  // Lighter background for dark theme ReactFlow canvas
  .theme-dark & {
    background-color: #414141; // Lighter than default dark theme background
  }
}

// Event flow specific sizing
.event-flow-container {
  height: 500px;
  border: 1px solid $border-color;
  border-radius: 4px;
}

// ReactFlow base element text selection prevention
.react-flow__viewport,
.react-flow__node,
.react-flow__edge,
.react-flow__handle,
.react-flow__connectionline {
  @include prevent-text-selection-important;
}

// Prevent text selection during dragging operations
.react-flow__pane.dragging,
.react-flow__pane.connecting {
  @include prevent-text-selection-important;
}

// ReactFlow Node Override - Remove default ReactFlow node styling
.react-flow__node-entity {
  background: transparent !important;
  border: none !important;
  border-radius: 0 !important;
  padding: 0 !important;
  box-shadow: none !important;
  @include prevent-text-selection-important;
}

// Controls and minimap styles
.react-flow__controls {
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  
  // Make zoom controls vertical and smaller (20% reduction)
  &.react-flow__controls {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: var(--theme-card-bg, #ffffff);
    border: none;
    border-radius: 6px;
    padding: 3px;
    
    .theme-dark & {
      background: var(--theme-card-bg, #2d2d2d);
    }
    
    .react-flow__controls-button {
      margin: 0;
      border: none;
      background: transparent;
      width: 26px;  /* 20% smaller than 32px */
      height: 26px; /* 20% smaller than 32px */
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      color: var(--theme-text, #333333);
      transition: background-color 0.15s ease;
      
      &:hover {
        background-color: var(--theme-hover-bg, rgba(0, 0, 0, 0.04));
      }
      
      .theme-dark &:hover {
        background-color: var(--theme-hover-bg, rgba(255, 255, 255, 0.05));
      }
      
      svg {
        width: 13px;  /* 20% smaller than 16px */
        height: 13px; /* 20% smaller than 16px */
      }
    }
  }
}

// Hide React Flow attribution/watermark
.react-flow__attribution {
  display: none !important;
}

.react-flow__minimap {
  background-color: var(--theme-card-bg, #f8f9fa);
  border: 1px solid var(--theme-border, #ddd);
  border-radius: 4px;
}

// Zoom controls styles
.react-flow__controls-zoom {
  border: 1px solid #ddd;
  border-radius: 4px;
  background-color: white;
  
  button {
    border: none;
    background: none;
    padding: 5px;
    cursor: pointer;
    color: #666;
    
    &:hover {
      color: #333;
      background-color: #f5f5f5;
    }
  }
}